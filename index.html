<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Shorts Dashboard PRO</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:linear-gradient(135deg,#0f0f0f,#1c1c1c,#111827);
  color:white;
}

.container{
  max-width:1100px;
  margin:auto;
  padding:20px;
}

.card{
  background:#1a1a1a;
  padding:20px;
  border-radius:15px;
  margin-bottom:20px;
  box-shadow:0 0 25px rgba(0,0,0,0.6);
}

h1{
  text-align:center;
  margin-bottom:30px;
}

input{
  width:100%;
  padding:10px;
  margin-top:10px;
  border-radius:8px;
  border:none;
  font-size:14px;
}

button{
  margin-top:10px;
  padding:10px 15px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  font-weight:bold;
}

.primary{ background:#00e5ff; color:black; }
.copyBtn{ background:#4caf50; color:black; margin-top:15px; }

.ideaItem{
  background:#111;
  padding:12px;
  margin-top:8px;
  border-radius:8px;
  cursor:pointer;
  transition:0.2s;
  border:1px solid #333;
}

.ideaItem:hover{
  background:#222;
  border-color:#00e5ff;
}

.sceneBox{
  background:#111;
  padding:15px;
  border-radius:12px;
  margin-top:15px;
  border:1px solid #333;
}

pre{
  white-space:pre-wrap;
}

.loading{
  color:#00e5ff;
}
</style>
</head>
<body>

<div class="container">

<h1>ðŸš€ AI Shorts Dashboard PRO</h1>

<div class="card">
<h3>API Key</h3>
<input type="password" id="apiKey" placeholder="Masukkan API Key">
<button class="primary" onclick="saveKey()">Simpan API Key</button>
</div>

<div class="card">
<h3>Generate 10 Ide (Click to Produce)</h3>
<button class="primary" onclick="generateIdeas()">Generate Ide</button>
<div id="ideaOutput"></div>
</div>

<div class="card">
<h3>Scenes</h3>
<div id="sceneContainer"></div>
</div>

</div>

<script>
const API_URL="https://api.groq.com/openai/v1/chat/completions";
const MODEL="llama3-70b-8192";

function saveKey(){
  localStorage.setItem("apiKey",document.getElementById("apiKey").value);
  alert("API Key Tersimpan");
}

window.onload=()=>{
  const saved=localStorage.getItem("apiKey");
  if(saved) document.getElementById("apiKey").value=saved;
};

async function callAI(prompt){
  const key=localStorage.getItem("apiKey");
  if(!key){alert("Masukkan API Key dulu");return;}

  const res=await fetch(API_URL,{
    method:"POST",
    headers:{
      "Content-Type":"application/json",
      "Authorization":"Bearer "+key
    },
    body:JSON.stringify({
      model:MODEL,
      messages:[{role:"user",content:prompt}],
      temperature:0.7
    })
  });

  const data=await res.json();
  return data.choices[0].message.content;
}

function cleanIdeas(text){
  return text
    .split("\n")
    .map(l=>l.split(" - ")[0])
    .map(l=>l.replace(/^\d+\.\s*/,""))
    .filter(l=>l.trim()!=="");
}

async function generateIdeas(){
  document.getElementById("ideaOutput").innerHTML="<div class='loading'>Generating ideas...</div>";

  const prompt=`
Buat 10 ide YouTube Shorts tentang batas tubuh manusia.

ATURAN:
- Hanya judul.
- Satu baris satu ide.
- Tanpa deskripsi.
- Tanpa numbering.
`;

  const raw=await callAI(prompt);
  const ideas=cleanIdeas(raw);

  renderIdeas(ideas);
}

function renderIdeas(ideas){
  const container=document.getElementById("ideaOutput");
  container.innerHTML="";

  ideas.forEach(idea=>{
    const div=document.createElement("div");
    div.className="ideaItem";
    div.innerText=idea;
    div.onclick=()=>produceFull(idea);
    container.appendChild(div);
  });
}

async function produceFull(idea){
  document.getElementById("sceneContainer").innerHTML="<div class='loading'>Generating scenes...</div>";

  const prompt=`
Anda adalah sistem produksi YouTube Shorts profesional.

Topik: ${idea}

Buat 5 SCENE dengan struktur persis seperti ini:

[SCENE 1 â€“ Selama ...]
SCRIPT:
Narasi progresif sesuai waktu.

IMAGE PROMPT:
Harus selalu diawali dengan:
Place the skeleton character
Lalu lanjutkan deskripsi sinematik 8K UHD.

VIDEO PROMPT:
Prompt image-to-video cinematic.

Gunakan waktu fleksibel:
menit / jam / hari / minggu / bulan / tahun.

Setiap scene harus menunjukkan eskalasi kondisi.
`;

  const result=await callAI(prompt);
  renderScenes(result);
}

function renderScenes(text){
  const container=document.getElementById("sceneContainer");
  container.innerHTML="";

  const scenes=text.split("[SCENE").filter(s=>s.trim()!="");

  scenes.forEach(scene=>{
    const fullText="[SCENE"+scene.trim();

    const div=document.createElement("div");
    div.className="sceneBox";

    const pre=document.createElement("pre");
    pre.textContent=fullText;

    const btn=document.createElement("button");
    btn.className="copyBtn";
    btn.innerText="Copy Scene";
    btn.onclick=()=>navigator.clipboard.writeText(fullText);

    div.appendChild(pre);
    div.appendChild(btn);
    container.appendChild(div);
  });
}
</script>

</body>
</html>
