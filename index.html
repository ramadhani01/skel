<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Extreme Anatomy Generator PRO</title>
<style>
body { font-family: Arial; background:#0f0f0f; color:#eee; padding:20px; }
textarea, input, select { width:100%; margin:10px 0; padding:10px; background:#1c1c1c; color:#fff; border:1px solid #333; }
button { padding:8px 15px; margin:5px 5px 5px 0; background:#ff3c00; color:#fff; border:none; cursor:pointer; }
button:hover { background:#ff5c2a; }
.section { background:#111; padding:15px; margin-top:20px; border:1px solid #333; }
.scene { border-top:1px solid #333; padding-top:15px; margin-top:15px; }
.copyBtn { background:#2a2a2a; }
.copyBtn:hover { background:#444; }
h3 { margin-bottom:5px; }
</style>
</head>
<body>

<h2>Extreme Anatomy Generator PRO</h2>

<label>Groq API Key:</label>
<input type="password" id="apiKey">

<label>Pilih Model:</label>
<select id="model">
<option value="llama3-70b-8192">llama3-70b-8192</option>
<option value="mixtral-8x7b-32768">mixtral-8x7b-32768</option>
</select>

<button onclick="generateIdeas()">Generate 10 Ide</button>
<div class="section" id="ideasOutput"></div>

<label>Pilih Ide:</label>
<textarea id="selectedIdea" rows="2"></textarea>

<button onclick="generateFull()">Generate Full Script + Prompts</button>

<div class="section" id="scriptOutput"></div>
<div class="section" id="scenesContainer"></div>

<script>
async function callGroq(prompt) {
    const apiKey = document.getElementById("apiKey").value;
    const model = document.getElementById("model").value;

    const response = await fetch("https://api.groq.com/openai/v1/chat/completions", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
            "Authorization": "Bearer " + apiKey
        },
        body: JSON.stringify({
            model: model,
            messages: [{ role: "user", content: prompt }],
            temperature: 0.9
        })
    });

    const data = await response.json();
    return data.choices[0].message.content;
}

async function generateIdeas() {
    const prompt = `
Buat 10 ide video viral Extreme Anatomy.
Campuran:
70% realistis ekstrem
30% spekulatif ilmiah (misalnya hidup bersama naga).
Gunakan format: Apa yang Terjadi Jika...
`;

    document.getElementById("ideasOutput").innerText = "Loading...";
    const result = await callGroq(prompt);
    document.getElementById("ideasOutput").innerText = result;
}

async function generateFull() {
    const idea = document.getElementById("selectedIdea").value;

    const prompt = `
Buat konten lengkap untuk channel Extreme Anatomy.

Topik: ${idea}

Struktur:
1. Skrip 45-60 detik progresif waktu.
2. PROMPT GAMBAR Scene 1-5.
3. PROMPT VIDEO Scene 1-5.

Gunakan format jelas:

SCRIPT:
...

SCENE 1 IMAGE:
...

SCENE 1 VIDEO:
...

SCENE 2 IMAGE:
...

SCENE 2 VIDEO:
...

dst sampai SCENE 5.

Karakter wajib konsisten:
Ultra-realistic cinematic 3D render dari sosok kerangka humanoid dengan lapisan tubuh transparan seperti kristal atau gelas, identical character model across scenes.

Gunakan environment lock dan negative background protection.
`;

    document.getElementById("scriptOutput").innerText = "Loading...";
    document.getElementById("scenesContainer").innerHTML = "";

    const result = await callGroq(prompt);

    parseOutput(result);
}

function parseOutput(text) {
    const scriptMatch = text.match(/SCRIPT:\s*([\s\S]*?)SCENE 1 IMAGE:/);
    const scriptText = scriptMatch ? scriptMatch[1].trim() : "Script tidak ditemukan";

    document.getElementById("scriptOutput").innerHTML = `
        <h3>Script</h3>
        <textarea rows="8">${scriptText}</textarea>
        <button class="copyBtn" onclick="copyText(this.previousElementSibling.value)">Copy Script</button>
    `;

    const scenesContainer = document.getElementById("scenesContainer");
    scenesContainer.innerHTML = "<h3>Scenes</h3>";

    for (let i = 1; i <= 5; i++) {
        const imageRegex = new RegExp("SCENE " + i + " IMAGE:\\s*([\\s\\S]*?)SCENE " + i + " VIDEO:");
        const videoRegex = new RegExp("SCENE " + i + " VIDEO:\\s*([\\s\\S]*?)(SCENE " + (i+1) + " IMAGE:|$)");

        const imageMatch = text.match(imageRegex);
        const videoMatch = text.match(videoRegex);

        const imageText = imageMatch ? imageMatch[1].trim() : "";
        const videoText = videoMatch ? videoMatch[1].trim() : "";

        scenesContainer.innerHTML += `
            <div class="scene">
                <h4>Scene ${i}</h4>

                <b>Image Prompt</b>
                <textarea rows="6">${imageText}</textarea>
                <button class="copyBtn" onclick="copyText(this.previousElementSibling.value)">Copy Image</button>

                <br><br>

                <b>Video Prompt</b>
                <textarea rows="6">${videoText}</textarea>
                <button class="copyBtn" onclick="copyText(this.previousElementSibling.value)">Copy Video</button>
            </div>
        `;
    }
}

function copyText(text) {
    navigator.clipboard.writeText(text);
    alert("Copied!");
}
</script>

</body>
</html>
