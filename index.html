<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Shorts Production System</title>

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:#0f172a;
    color:white;
}
.container{
    max-width:900px;
    margin:auto;
    padding:20px;
}
h1{
    text-align:center;
    color:#38bdf8;
}
.card{
    background:#1e293b;
    padding:20px;
    border-radius:12px;
    margin-bottom:20px;
}
button{
    background:#38bdf8;
    color:black;
    padding:10px 15px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-weight:bold;
}
button:hover{
    opacity:0.85;
}
.idea{
    background:#334155;
    padding:10px;
    border-radius:8px;
    margin-bottom:10px;
    cursor:pointer;
}
.idea:hover{
    background:#475569;
}
#result{
    white-space:pre-line;
    background:#0b1220;
    padding:15px;
    border-radius:8px;
    border:1px solid #334155;
}
input{
    width:100%;
    padding:10px;
    border-radius:8px;
    border:none;
    margin-bottom:10px;
}
</style>
</head>

<body>
<div class="container">

<h1>ðŸ”¥ AI Shorts Production System</h1>

<div class="card">
<label>Masukkan GROQ API Key</label>
<input type="password" id="apiKey" placeholder="Masukkan API Key">
<button onclick="saveKey()">Simpan Key</button>
</div>

<div class="card">
<button onclick="generateIdeas()">Generate 10 Ide Viral</button>
</div>

<div class="card">
<h3>Daftar Ide</h3>
<div id="ideas"></div>
</div>

<div class="card">
<h3>Script + Scene</h3>
<div id="result"></div>
</div>

</div>

<script>

window.onload = function(){
    const savedKey = localStorage.getItem("GROQ_API_KEY");
    if(savedKey){
        document.getElementById("apiKey").value = savedKey;
    }
}

function saveKey(){
    localStorage.setItem("GROQ_API_KEY",document.getElementById("apiKey").value);
    alert("API Key tersimpan!");
}

async function callGroq(prompt){
    const apiKey = localStorage.getItem("GROQ_API_KEY");
    if(!apiKey){
        alert("Masukkan API Key dulu!");
        return null;
    }

    const response = await fetch("https://api.groq.com/openai/v1/responses",{
        method:"POST",
        headers:{
            "Content-Type":"application/json",
            "Authorization":"Bearer " + apiKey
        },
        body: JSON.stringify({
            model:"openai/gpt-oss-20b",
            input:prompt
        })
    });

    const data = await response.json();

    let text="";
    if(data.output){
        data.output.forEach(item=>{
            if(item.content){
                item.content.forEach(part=>{
                    if(part.type==="output_text"){
                        text+=part.text;
                    }
                });
            }
        });
    }

    return text;
}

async function generateIdeas(){
    document.getElementById("ideas").innerHTML="Loading...";
    document.getElementById("result").innerHTML="";

    const prompt=`
Buatkan 10 ide video YouTube Shorts viral gaya:
- Apa yang terjadi jika...
- Berapa lama kamu bisa...
- Apa yang terjadi pada tubuhmu jika...

Format hanya daftar bernomor.
Jangan penjelasan.
`;

    const text = await callGroq(prompt);
    if(!text) return;

    const lines = text.split("\n").filter(l=>l.trim()!="");

    const ideasDiv=document.getElementById("ideas");
    ideasDiv.innerHTML="";

    lines.forEach(line=>{
        const div=document.createElement("div");
        div.className="idea";
        div.innerText=line;
        div.onclick=()=>generateScript(line);
        ideasDiv.appendChild(div);
    });
}

async function generateScript(idea){
    document.getElementById("result").innerText="Generating script...";

    const prompt=`
Buat narasi YouTube Shorts durasi 45-70 detik.

Format WAJIB:

[JUDUL]
Judul kuat dan clickbait edukatif.

[NARASI]
Gunakan progresi waktu:
"Selama X detik/menit/jam..."

[SCENE]
Pisahkan per scene:
- SCRIPT:
- VISUAL: (deskripsi animasi anatomi 3D, kerangka transparan, cinematic, edukatif, non-horror)

Topik: ${idea}
`;

    const text=await callGroq(prompt);
    if(!text) return;

    document.getElementById("result").innerText=text;
}

</script>

</body>
</html>
